{"version":3,"sources":["webpack://kekstagram/./source/js/upload-photo.js","webpack://kekstagram/./source/js/validation.js","webpack://kekstagram/webpack/bootstrap","webpack://kekstagram/./source/js/utils.js","webpack://kekstagram/./source/js/slider.js","webpack://kekstagram/./source/js/messages.js","webpack://kekstagram/./source/js/api.js","webpack://kekstagram/./source/js/form.js","webpack://kekstagram/./source/js/big-picture.js","webpack://kekstagram/./source/js/picture.js","webpack://kekstagram/./source/js/filters.js","webpack://kekstagram/./source/js/main.js"],"names":["uploadInput","document","querySelector","imgUploadPreview","FILES_TYPES","addEventListener","file","files","fileName","name","toLowerCase","some","it","endsWith","reader","FileReader","childNodes","src","result","readAsDataURL","RE_HASHTAG","textHastags","textDescription","textHashtagsMap","hashtags","value","trim","split","uniqueHashtags","Set","forEach","hashtag","length","setCustomValidity","size","test","reportValidity","commentLength","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","isEscEvent","evt","key","effectLevel","effectList","effectValue","slider","createSlider","min","max","start","step","classList","remove","noUiSlider","create","range","connect","format","to","Number","isInteger","toFixed","from","parseFloat","destroySlider","add","destroy","target","matches","element","on","values","handle","style","filter","main","errorTemplate","content","successTemplate","showModal","modal","closeModal","removeEventListener","onDocumentKeyDown","appendChild","SERVER_URL","SEND_DATA_ERROR_MESSAGE","MAX_SCALE","imageUploadForm","uploadFile","imgOverlay","uploadCancel","imageUploadPreview","scaleControlValue","scaleControlBigger","scaleControlSmaller","currentScale","onEscDown","activeElement","closeFrom","body","onSendDataSuccess","successModal","cloneNode","showSuccessModal","onSendDataError","errorModal","showErrorModal","transform","currentCommentsLength","shownCommentsCount","commentsData","bigPicture","bigPictureImg","likesCount","commentsCount","commentsShown","socialComments","socialCaption","commentsLoader","bigPictureCancel","commentTemplate","onCommentsLoaderClick","createComments","textContent","commentsFragment","fragment","createDocumentFragment","comment","newComment","avatar","message","commentElement","commentPicture","commentText","alt","createComment","createCommentsFragment","splice","pictureListElem","pictureTemplate","generatePhotos","photos","pictureFragment","item","pictureElem","url","comments","likes","description","slice","innerHTML","renderBigPicture","imgFilters","imgFiltersFrom","buttons","querySelectorAll","clearPhotos","photo","onSuccess","onFail","preventDefault","fetch","method","then","response","ok","catch","sendData","FormData","data","_","debounce","contains","button","id","copyPhotos","randomPhotos","shuffle","getRandomPhotos","sortedPhotos","sort","photoA","photoB","sortPhotosByComments","onFilterFormChange","setFilterListener","alertContainer","createElement","zIndex","position","left","top","right","padding","fontSize","textAlign","backgroundColor","GET_DATA_ERROR_MESSAGE","append","setTimeout","showAlert","json"],"mappings":"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","file":"main.bundle.js","sourcesContent":["const uploadInput = document.querySelector('.img-upload__input');\nconst imgUploadPreview = document.querySelector('.img-upload__preview');\n\nconst FILES_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\n\nuploadInput.addEventListener('change', () => {\n  const file = uploadInput.files[0];\n  const fileName = file.name.toLowerCase();\n\n  const matches = FILES_TYPES.some((it) => {\n    return fileName.endsWith(it);\n  })\n\n  if (matches) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      imgUploadPreview.childNodes[1].src = reader.result;\n    });\n\n    reader.readAsDataURL(file);\n  }\n})\n","const RE_HASHTAG = /^#[\\wа-яa-z]{1,19}$/i;\nconst MAX_HASHTAG_LENGTH = 20;\nconst MAX_HASHTAG_AMOUNT = 5;\nconst MAX_COMMENT_LENGTH = 140;\n\nconst textHastags = document.querySelector('.text__hashtags');\nconst textDescription = document.querySelector('.text__description');\n\n\nconst textHashtagsMap = {\n  double: 'Хэштеги должны быть разные',\n  regex: 'Хэштег должен начинаться с символа \\'#\\', не может содержать один символ \\'#\\', может содержать только буквы и числа ',\n  size: 'Хэштегов не должно быть больше пяти',\n  length: `Длина одного хэштега не может быть больше ${MAX_HASHTAG_LENGTH} символов`,\n}\n\ntextHastags.addEventListener('input', () => {\n  const hashtags = textHastags.value.toLowerCase().trim().split(' ');\n  const uniqueHashtags = new Set(hashtags);\n\n  hashtags.forEach((hashtag) => {\n    if(!textHastags.value) {\n      textHastags.setCustomValidity('');\n    } else if (hashtag.length > MAX_HASHTAG_LENGTH) {\n      textHastags.setCustomValidity(textHashtagsMap.length);\n    } else if (hashtags.length >= MAX_HASHTAG_AMOUNT) {\n      textHastags.setCustomValidity(textHashtagsMap.size);\n    } else if (hashtags.length !== uniqueHashtags.size) {\n      textHastags.setCustomValidity(textHashtagsMap.double);\n    } else if (!RE_HASHTAG.test(hashtag)) {\n      textHastags.setCustomValidity(textHashtagsMap.regex);\n    } else if(!textHastags.value) {\n      textHastags.setCustomValidity('');\n    } else {\n      textHastags.setCustomValidity('');\n    }\n\n    textHastags.reportValidity();\n  })\n});\n\ntextDescription.addEventListener('input', () => {\n  const commentLength = textDescription.value.length;\n  textDescription.setCustomValidity('');\n\n  if (MAX_COMMENT_LENGTH < commentLength) {\n    textDescription.setCustomValidity(`Длина комментария не должная быть больше ${MAX_COMMENT_LENGTH} символов`)\n  }\n  textDescription.reportValidity();\n});\n\n\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const ALERT_SHOW_TIME = 5000;\n\nconst isEscEvent = (evt) => {\n  return evt.key === ('Escape' || 'Esc');\n}\nconst showAlert = (message) => {\n  const alertContainer = document.createElement('div');\n  alertContainer.style.zIndex = 100;\n  alertContainer.style.position = 'absolute';\n  alertContainer.style.left = 0;\n  alertContainer.style.top = 0;\n  alertContainer.style.right = 0;\n  alertContainer.style.padding = '10px 3px';\n  alertContainer.style.fontSize = '30px';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.backgroundColor = 'red';\n\n  alertContainer.textContent = message;\n\n  document.body.append(alertContainer);\n\n  setTimeout(() => {\n    alertContainer.remove();\n  }, ALERT_SHOW_TIME);\n}\n\n\n\nexport {\n  isEscEvent,\n  showAlert\n};\n","/* global noUiSlider:readonly */\nconst effectLevel = document.querySelector('.img-upload__effect-level');\nconst effectList = document.querySelector('.effects__list');\nconst effectValue = document.querySelector('.effect-level__value');\nconst imgUploadPreview = document.querySelector('.img-upload__preview img');\nconst slider = document.querySelector('.effect-level__slider');\n\nconst createSlider = (min, max, start, step) => {\n  effectLevel.classList.remove('hidden');\n  noUiSlider.create(slider, {\n    range: {\n      min: min,\n      max: max,\n    },\n    start: start,\n    step: step,\n    connect: 'lower',\n    format: {\n      to: function (value) {\n        if (Number.isInteger(value)) {\n          return value.toFixed(0);\n        }\n        return value.toFixed(1);\n      },\n      from: function (value) {\n        return parseFloat(value);\n      },\n    },\n  });\n};\n\nconst destroySlider = () => {\n  effectLevel.classList.add('hidden');\n  slider.noUiSlider.destroy();\n};\n\nconst resetSlider = () => {\n  effectLevel.classList.add('hidden');\n  imgUploadPreview.style.filter = 'none';\n  imgUploadPreview.style.transform = '';\n};\n\nconst applyEffects = (element) => {\n  slider.noUiSlider.on('update', (values, handle) => {\n    switch (element) {\n      case 'chrome':\n        imgUploadPreview.style.filter = 'none';\n        imgUploadPreview.style.filter = `grayscale(${values[handle]})`;\n        break;\n      case 'sepia':\n        imgUploadPreview.style.filter = 'none';\n        imgUploadPreview.style.filter = `sepia(${values[handle]})`;\n        break;\n      case 'marvin':\n        imgUploadPreview.style.filter = 'none';\n        imgUploadPreview.style.filter = `invert(${values[handle]}%)`;\n        break;\n      case 'phobos':\n        imgUploadPreview.style.filter = 'none';\n        imgUploadPreview.style.filter = `blur(${values[handle]}px)`;\n        break;\n      case 'heat':\n        imgUploadPreview.style.filter = 'none';\n        imgUploadPreview.style.filter = `brightness(${values[handle]})`;\n        break;\n      case 'none':\n        imgUploadPreview.style.filter = 'none';\n        destroySlider();\n        break;\n    }\n\n    effectValue.value = values[handle];\n  });\n};\n\neffectList.addEventListener('change', (evt) => {\n  if (evt.target.matches('.effects__radio')) {\n    if (slider.noUiSlider) {\n      destroySlider();\n    }\n\n    switch (evt.target.value) {\n      case 'chrome':\n        createSlider(0, 1, 1, 0.1);\n        break;\n      case 'sepia':\n        createSlider(0, 1, 1, 0.01);\n        break;\n      case 'marvin':\n        createSlider(0, 100, 100, 1);\n        break;\n      case 'phobos':\n        createSlider(0, 3, 3, 0.1);\n        break;\n      case 'heat':\n        createSlider(1, 3, 3, 0.1);\n        break;\n      case 'none':\n        createSlider(0, 1, 1, 0.1);\n        break;\n    }\n\n    imgUploadPreview.classList.add(`effects__preview--${evt.target.value}`);\n    applyEffects(evt.target.value);\n  }\n});\n\nexport {resetSlider};\n\n\n\n\n\n\n","import {isEscEvent} from './utils.js';\n\nconst main = document.querySelector('main')\nconst errorTemplate = document.querySelector('#error')\n  .content\n  .querySelector('.error');\n\nconst successTemplate = document.querySelector('#success')\n  .content\n  .querySelector('.success');\n\nconst showModal = (modal) => {\n  const closeModal = () => {\n    modal.remove();\n    document.removeEventListener('keydown', onDocumentKeyDown);\n  }\n\n  const onModalClick = () => closeModal();\n\n  const onDocumentKeyDown = (evt) => {\n    if (isEscEvent(evt)) {\n      closeModal();\n    }\n  }\n\n  main.appendChild(modal);\n  modal.addEventListener('click', onModalClick);\n  document.addEventListener('keydown', onDocumentKeyDown);\n};\n\nconst showSuccessModal = () => {\n  const successModal = successTemplate.cloneNode(true);\n  showModal(successModal);\n};\n\nconst showErrorModal = () => {\n  const errorModal = errorTemplate.cloneNode(true);\n  showModal(errorModal);\n};\n\nexport {showSuccessModal, showErrorModal};\n","const SERVER_URL = 'https://22.javascript.pages.academy/kekstagram';\nconst SEND_DATA_ERROR_MESSAGE = 'Не удалось отправить форму. Попробуйте еще раз';\nconst GET_DATA_ERROR_MESSAGE = 'Отсутствует связь с сервером. Попробуйте позже';\n\nconst getData = (onSuccess, onFail) => {\n  fetch(`${SERVER_URL}/data`)\n    .then((response) => response.json())\n    .then((data) => {\n      onSuccess(data);\n    })\n    .catch(() => {\n      onFail(GET_DATA_ERROR_MESSAGE);\n    });\n};\n\nconst sendData = (onSuccess, onFail, body) => {\n  fetch(\n    SERVER_URL,\n    {\n      method: 'POST',\n      body,\n    },\n  )\n    .then((response) => {\n      if (response.ok){\n        onSuccess();\n      } else {\n        onFail(SEND_DATA_ERROR_MESSAGE);\n      }\n    })\n    .catch( ()=> {\n      onFail(SEND_DATA_ERROR_MESSAGE);\n    });\n};\n\nexport {getData, sendData, GET_DATA_ERROR_MESSAGE };\n","import {isEscEvent} from './utils.js';\nimport {resetSlider} from './slider.js';\nimport {showSuccessModal, showErrorModal} from './messages.js';\nimport {sendData} from './api.js';\n\nconst MIN_SCALE = 25;\nconst MAX_SCALE = 100;\nconst SCALE_STEP = 25;\nconst DEFAULT_SCALE = 100;\nconst DEFAULT_IMAGE = 'img/upload-default-image.jpg';\n\nconst imageUploadForm = document.querySelector('.img-upload__form');\nconst uploadFile = document.querySelector('#upload-file');\nconst imgOverlay = imageUploadForm.querySelector('.img-upload__overlay');\nconst uploadCancel = document.querySelector('#upload-cancel');\nconst imageUploadPreview = imgOverlay.querySelector('.img-upload__preview img');\nconst scaleControlValue = imgOverlay.querySelector('.scale__control--value');\nconst scaleControlBigger = imgOverlay.querySelector('.scale__control--bigger');\nconst scaleControlSmaller = imgOverlay.querySelector('.scale__control--smaller');\nconst textHastags = document.querySelector('.text__hashtags');\nconst textDescription = document.querySelector('.text__description');\nscaleControlValue.value = MAX_SCALE;\nlet currentScale = DEFAULT_SCALE;\n\nconst openForm = () => {\n  imgOverlay.classList.remove('hidden');\n  document.body.classList.add('modal-open');\n  document.addEventListener('keydown', onEscDown);\n  resetSlider();\n  scaleControlValue.value = '100%';\n  imageUploadPreview.style.transform = 'none';\n  imageUploadPreview.src = DEFAULT_IMAGE;\n};\n\nconst onEscDown = (evt) => {\n  if(isEscEvent(evt)) {\n    if (textHastags !== document.activeElement && textDescription !== document.activeElement){\n      closeFrom();\n    }\n  }\n};\n\nconst closeFrom = () => {\n  imgOverlay.classList.add('hidden');\n  document.body.classList.remove('modal-open');\n  document.removeEventListener('keydown', onEscDown);\n  uploadFile.value = '';\n  textHastags.value = '';\n  textDescription.value = '';\n};\n\nconst onScaleControlSmaller = () => {\n  if (currentScale > MIN_SCALE && currentScale <= MAX_SCALE) {\n    currentScale = currentScale - SCALE_STEP;\n    scaleControlValue.value = `${currentScale}%`;\n    imageUploadPreview.style.transform = `scale(${currentScale / MAX_SCALE})`;\n  }\n};\n\nconst onScaleControlBigger = () => {\n  if (currentScale >= MIN_SCALE && currentScale < MAX_SCALE) {\n    currentScale = currentScale + SCALE_STEP;\n    scaleControlValue.value = `${currentScale}%`;\n    imageUploadPreview.style.transform = `scale(${currentScale / MAX_SCALE})`;\n  }\n};\n\nconst onSendDataSuccess = () => {\n  showSuccessModal();\n  closeFrom();\n};\n\nconst onSendDataError = () => {\n  showErrorModal();\n  closeFrom();\n};\n\nconst setUserFormSubmit = () => {\n  imageUploadForm.addEventListener('submit', (evt) => {\n    evt.preventDefault();\n\n    sendData(\n      onSendDataSuccess,\n      onSendDataError,\n      new FormData(evt.target),\n    );\n  });\n};\n\nuploadFile.addEventListener('click', openForm);\nuploadCancel.addEventListener('click', closeFrom);\nscaleControlBigger.addEventListener('click', onScaleControlBigger);\nscaleControlSmaller.addEventListener('click', onScaleControlSmaller);\n\nexport {setUserFormSubmit, closeFrom};\n\n\n\n\n","import {isEscEvent} from './utils.js';\n\nconst MAX_COMMENTS_AMOUNT = 5;\nlet commentsData = [];\nlet currentCommentsLength;\nlet shownCommentsCount;\n\nconst body = document.querySelector('body');\nconst bigPicture = document.querySelector('.big-picture');\nconst bigPictureImg = bigPicture.querySelector('.big-picture__img img');\nconst likesCount = bigPicture.querySelector('.likes-count');\nconst commentsCount = bigPicture.querySelector('.comments-count');\nconst commentsShown = bigPicture.querySelector('.comments-shown');\nconst socialComments = bigPicture.querySelector('.social__comments');\nconst socialCaption = bigPicture.querySelector('.social__caption');\nconst commentsLoader = bigPicture.querySelector('.comments-loader');\nconst bigPictureCancel = bigPicture.querySelector('.big-picture__cancel');\nconst commentTemplate = socialComments.querySelector('.social__comment');\n\n\nconst createComment = ({avatar, name, message}) => {\n  const commentElement = commentTemplate.cloneNode(true);\n  const commentPicture = commentElement.querySelector('.social__picture');\n  const commentText = commentElement.querySelector('.social__text');\n\n  commentPicture.src = avatar;\n  commentPicture.alt = name;\n  commentText.textContent = message;\n\n  return commentElement;\n};\n\nconst createCommentsFragment = (commentsData) => {\n  const fragment = document.createDocumentFragment();\n\n  commentsData.forEach((comment) => {\n    const newComment = createComment(comment);\n    fragment.appendChild(newComment);\n  })\n\n  return fragment;\n};\n\nconst onCommentsLoaderClick = () => {\n  createComments(commentsData);\n  shownCommentsCount += MAX_COMMENTS_AMOUNT;\n\n  if (shownCommentsCount >= currentCommentsLength) {\n    shownCommentsCount = currentCommentsLength;\n  }\n\n  commentsShown.textContent = shownCommentsCount;\n\n  if (commentsData.length === 0) {\n    commentsLoader.classList.add('hidden');\n  }\n}\n\nconst createComments = (commentsData) => {\n  const shownComments = commentsData.splice(0, MAX_COMMENTS_AMOUNT);\n  const commentsFragment = createCommentsFragment(shownComments);\n\n  socialComments.appendChild(commentsFragment);\n}\nconst renderBigPicture = ({url, description, comments, likes}) => {\n  openModal();\n  bigPictureImg.src = url;\n  likesCount.textContent = likes;\n  commentsCount.textContent = currentCommentsLength = comments.length;\n  socialCaption.textContent = description;\n  commentsData = comments.slice()\n\n  if (comments.length > MAX_COMMENTS_AMOUNT) {\n    commentsLoader.classList.remove('hidden');\n    commentsLoader.addEventListener('click', onCommentsLoaderClick)\n  } else {\n    commentsLoader.classList.add('hidden')\n  }\n\n  shownCommentsCount = commentsData.length > MAX_COMMENTS_AMOUNT ? MAX_COMMENTS_AMOUNT : commentsData.length;\n  commentsShown.textContent = shownCommentsCount;\n  socialComments.innerHTML = '';\n  createComments(commentsData);\n};\n\nconst openModal = () => {\n  body.classList.add('modal-open');\n  bigPicture.classList.remove('hidden');\n  document.addEventListener('keydown', onEscDown)\n};\n\nconst onEscDown = (evt) => {\n  if (isEscEvent(evt)) {\n    closeModal();\n  }\n};\n\nconst closeModal = () => {\n  body.classList.remove('modal-open');\n  bigPicture.classList.add('hidden');\n  document.removeEventListener('keydown', onEscDown)\n};\n\nbigPictureCancel.addEventListener('click', () => {\n  document.removeEventListener('keydown', onEscDown);\n  closeModal();\n});\n\nexport {openModal, renderBigPicture};\n\n\n\n","import {renderBigPicture} from './big-picture.js';\n\nconst pictureListElem = document.querySelector('.pictures');\nconst pictureTemplate = document.querySelector('#picture')\n  .content\n  .querySelector('.picture');\n\nconst generatePhotos = (photos) => {\n  const pictureFragment = document.createDocumentFragment();\n\n  photos.forEach((item) => {\n    const pictureElem = pictureTemplate.cloneNode(true);\n    pictureElem.querySelector('.picture__img').src = item.url;\n    pictureElem.querySelector('.picture__comments').textContent = item.comments.length;\n    pictureElem.querySelector('.picture__likes').textContent = item.likes;\n    pictureFragment.appendChild(pictureElem);\n\n    pictureElem.addEventListener('click', () => {\n      renderBigPicture(item);\n    })\n  });\n\n  pictureListElem.appendChild(pictureFragment);\n};\n\nexport {generatePhotos};\n\n\n\n\n\n\n\n\n\n\n","/* global _:readonly */\nimport {generatePhotos} from './picture.js';\n\nconst RERENDER_DELAY = 500;\nconst RANDOM_COUNT_PHOTOS = 10;\n\nconst imgFilters = document.querySelector('.img-filters');\nconst imgFiltersFrom = document.querySelector('.img-filters__form');\nconst buttons = document.querySelectorAll('.img-filters__button');\n\n\nconst showFilters = () => {\n  imgFilters.classList.remove('img-filters--inactive');\n};\n\nconst clearPhotos = () => {\n  const previousPhotos = document.querySelectorAll('.picture');\n  previousPhotos.forEach(photo => photo.remove());\n};\n\nconst getRandomPhotos = (photos) => {\n  const copyPhotos = photos.slice();\n  const randomPhotos = _.shuffle(copyPhotos).slice(RANDOM_COUNT_PHOTOS);\n  generatePhotos(randomPhotos.slice(0, RANDOM_COUNT_PHOTOS));\n};\n\nconst sortPhotosByComments = (photos) => {\n  const sortedPhotos = photos.slice().sort((photoA, photoB) => photoB.comments.length - photoA.comments.length);\n  generatePhotos(sortedPhotos);\n};\n\nconst onFilterFormChange = (evt, photos) => {\n  if (evt.target.classList.contains('img-filters__button--active') || !evt.target.classList.contains('img-filters__button')) {\n    return;\n  }\n\n  buttons.forEach(button => button.classList.remove('img-filters__button--active'));\n  evt.target.classList.add('img-filters__button--active');\n\n  switch (evt.target.id) {\n    case 'filter-default':\n      clearPhotos(photos);\n      generatePhotos(photos);\n      break;\n    case 'filter-random':\n      clearPhotos();\n      getRandomPhotos(photos)\n      break;\n    case 'filter-discussed':\n      clearPhotos();\n      sortPhotosByComments(photos)\n      break;\n  }\n};\n\nconst setFilterListener = (data) => {\n  imgFiltersFrom.addEventListener('click', _.debounce((evt) => onFilterFormChange(evt, data), RERENDER_DELAY))\n};\n\nexport {showFilters, setFilterListener};\n","import './utils.js';\nimport './form.js';\nimport './big-picture.js';\nimport './picture.js';\nimport './slider.js';\nimport './validation.js';\nimport './upload-photo.js'\nimport {getData, GET_DATA_ERROR_MESSAGE} from './api.js';\nimport {generatePhotos} from './picture.js';\nimport { setUserFormSubmit} from './form.js';\nimport {showAlert} from './utils.js';\nimport  {showFilters, setFilterListener} from './filters.js';\n\n\nconst onDataSuccess = (data) => {\n  generatePhotos(data)\n  showFilters();\n  setFilterListener(data);\n};\n\nconst onDataFail = () => {\n  showAlert(GET_DATA_ERROR_MESSAGE);\n};\n\nsetUserFormSubmit();\ngetData(onDataSuccess, onDataFail);\n\n"],"sourceRoot":""}